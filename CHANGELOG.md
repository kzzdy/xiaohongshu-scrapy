# 更新日志 / Changelog

## [2.2.0] - 2025-11-16

### 🎉 重大更新：GUI工作流程优化

#### 新增功能
- **📁 JSON管理器** - 新增JSON文件管理和链接提取功能
- **优化的工作流程** - 三步走流程：搜索 → JSON管理器 → 笔记爬取

#### 工作流程改进

**优化前的问题**：
- 搜索爬取功能不明确，用户不知道何时下载媒体
- 标签页顺序与实际使用流程不符
- 容易触发反爬虫机制

**优化后的流程**：
```
第一步：搜索爬取
  ├─ 输入关键词（如：重庆美食、用户昵称）
  ├─ 设置数量（建议10-50）
  ├─ 强制保存为JSON格式
  ├─ 强制不下载媒体文件
  └─ 保存到：datas/json_datas/

第二步：JSON管理器
  ├─ 刷新并选择JSON文件
  ├─ 查看笔记列表（标题+链接）
  ├─ 复制所有链接到剪贴板
  └─ 可以筛选需要的笔记

第三步：笔记爬取
  ├─ 粘贴笔记链接
  ├─ 选择保存格式（Excel/JSON/CSV）
  ├─ 勾选"下载图片/视频"
  └─ 下载完整内容
```

#### 界面变化

**标签页顺序调整**：
- 旧顺序：配置 → 笔记爬取 → 用户爬取 → 搜索爬取 → 日志
- 新顺序：配置 → 搜索爬取 → JSON管理器 → 笔记爬取 → 日志

**搜索爬取页面**：
- 添加功能说明和使用提示
- 强制使用JSON格式（移除格式选择）
- 强制不下载媒体（移除下载选项）
- 按钮文字改为"开始搜索（仅保存JSON）"
- 添加参数说明（关键词、数量建议）
- 优化完成提示，引导用户进入下一步

**JSON管理器页面**（新增）：
- 自动扫描json_datas目录
- 下拉列表选择JSON文件
- 显示笔记列表（标题+链接）
- 一键复制所有链接
- 打开目录按钮

**笔记爬取页面**：
- 保持原有功能不变
- 更新使用说明，强调从JSON管理器粘贴链接

#### 优势

✅ **清晰的工作流程** - 每个步骤职责明确，按顺序操作不会混乱
✅ **避免触发风控** - 搜索时不下载媒体，请求更轻量，降低请求频率
✅ **灵活性** - 可以先搜索多个关键词，然后统一筛选和爬取
✅ **可恢复性** - JSON文件持久化保存，即使中断也可以继续

#### 文档更新
- 更新 `README.md` - 添加工作流程说明
- 更新 `GUI使用说明.md` - 详细的三步走流程
- 更新 `快速开始-GUI.md` - 简化的快速上手指南

#### 清理工作
- 删除18个临时开发文档
- 删除18个测试和调试脚本
- 更新 `.gitignore` 文件

---

## [2.1.0] - 2025-11-12

### 🎉 重大更新：模块化架构重构

#### 新增功能
- **CLI命令行界面** - 提供友好的命令行操作方式
- **速率限制** - 可配置的请求速率控制
- **断点续传** - 支持中断后继续下载
- **多格式导出** - JSON/CSV/Excel多种格式
- **环境变量配置** - 使用.env文件管理配置
- **完善的日志系统** - 分级日志记录

#### 架构改进
- 模块化设计：`src/core/`, `src/api/`, `src/data/`, `src/spider/`, `src/cli/`
- 类型注解支持
- 单元测试覆盖
- 错误处理机制
- 进度跟踪功能

#### 向后兼容
- 保留 `main.py` 和 `apis/` 目录
- 旧代码可以继续运行
- 提供迁移指南

---

## [2.0.0] - 2023-10-21

### 新增功能
- **图形化界面（GUI）** - 无需编程，开箱即用
- 发布 release v2.1.0

---

## [1.x] - 2023年更新

### 2023-10-17
- 搜索下载新增排序方式选项（综合/热门/最新）

### 2023-10-08
- 上传代码到PyPI，可通过pip install安装

### 2023-10-05
- 新增跳过已下载功能
- 获取更详细的笔记和用户信息

### 2023-09-19
- 新增下载搜索结果功能

### 2023-09-18
- 代码重构，加入失败重试

### 2023-09-16
- 修复较大视频编码问题
- 加入异常处理

### 2023-09-13
- API更改params增加两个字段
- 修复图片无法下载问题
- 修复部分页面无法访问导致报错

### 2023-08-09
- 首次提交

---

## 版本说明

- **主版本号（Major）**：重大架构变更或不兼容的API修改
- **次版本号（Minor）**：新功能添加，保持向后兼容
- **修订号（Patch）**：Bug修复和小改进
