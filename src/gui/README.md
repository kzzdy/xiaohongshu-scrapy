# 小红书爬虫GUI使用指南

## 📖 简介

这是一个基于Tkinter的图形用户界面，为小红书爬虫提供了友好的操作界面，无需编写代码即可使用所有爬虫功能。

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置Cookie

在项目根目录创建 `.env` 文件，或在GUI的配置页面点击"创建示例.env"按钮。

编辑 `.env` 文件，填入你的小红书Cookie：

```env
COOKIES=your_cookies_here
```

### 3. 启动GUI

```bash
python gui_main.py
```

或者直接双击 `gui_main.py` 文件（Windows）

## 🎯 功能说明

### ⚙️ 配置页面

- **配置说明**：显示所有可配置项的说明
- **配置状态**：显示当前配置是否加载成功
- **重新加载配置**：重新从.env文件加载配置
- **打开.env文件**：直接打开.env文件进行编辑
- **创建示例.env**：创建一个包含所有配置项的示例文件

#### 配置项说明

**必填项：**
- `COOKIES` - 小红书登录Cookie（必须配置）

**可选项：**
- `RATE_LIMIT` - 请求速率限制（默认3.0请求/秒）
- `RETRY_TIMES` - 重试次数（默认3次）
- `TIMEOUT` - 请求超时时间（默认30秒）
- `OUTPUT_DIR` - 输出目录（默认datas）
- `LOG_LEVEL` - 日志级别（默认INFO）
- `ENABLE_RESUME` - 是否启用断点续传（默认true）
- `DOWNLOAD_MEDIA` - 是否下载媒体文件（默认true）
- `MAX_CONCURRENT_DOWNLOADS` - 最大并发下载数（默认3）

### 📝 笔记爬取页面

爬取单个或多个笔记的详细信息。

**使用步骤：**
1. 在文本框中输入笔记URL（每行一个）
2. 选择保存格式（JSON/CSV/Excel）
3. 选择是否下载图片/视频
4. 点击"开始爬取"按钮

**示例URL：**
```
https://www.xiaohongshu.com/explore/64356527000000001303282b
https://www.xiaohongshu.com/explore/63d625f8000000001d01042c
```

### 👤 用户爬取页面

爬取指定用户的所有笔记。

**使用步骤：**
1. 输入用户主页URL
2. 选择保存格式（JSON/CSV/Excel）
3. 选择是否下载图片/视频
4. 选择是否保存用户信息
5. 点击"开始爬取"按钮

**示例URL：**
```
https://www.xiaohongshu.com/user/profile/6185ce66000000001000705b
```

### 🔍 搜索爬取页面

根据关键词搜索并爬取笔记。

**使用步骤：**
1. 输入搜索关键词
2. 设置爬取数量
3. 选择排序方式：
   - 综合排序
   - 最新排序
   - 最热排序
4. 选择保存格式（JSON/CSV/Excel）
5. 选择是否下载图片/视频
6. 点击"开始搜索"按钮

### 📋 日志页面

实时显示爬虫运行日志。

**功能：**
- 实时显示所有操作日志
- 不同级别的日志用不同颜色显示（错误=红色，警告=橙色）
- 清空日志：清除当前显示的所有日志
- 保存日志：将日志保存到文本文件

## 📁 输出文件

所有爬取的数据默认保存在 `datas` 目录下（可在.env中配置）：

```
datas/
├── notes/              # 笔记数据
│   ├── note_123.json
│   └── images/         # 笔记图片
├── users/              # 用户数据
│   └── user_456.json
├── search/             # 搜索结果
│   └── keyword_789.json
└── .progress.json      # 进度文件（断点续传）
```

## 🔧 高级功能

### 断点续传

启用 `ENABLE_RESUME=true` 后，程序会记录已下载的笔记，重新运行时会自动跳过已下载的内容。

### 速率限制

通过 `RATE_LIMIT` 配置请求速率，避免请求过快被平台限制。建议设置为 2.0-5.0 请求/秒。

### 并发下载

通过 `MAX_CONCURRENT_DOWNLOADS` 配置同时下载的媒体文件数量，提高下载效率。

## ❓ 常见问题

### 1. Cookie如何获取？

1. 打开小红书网页版 (https://www.xiaohongshu.com)
2. 登录你的账号
3. 按F12打开开发者工具
4. 切换到Network（网络）标签
5. 刷新页面，找到任意请求
6. 在请求头中找到Cookie字段，复制完整的Cookie值
7. 粘贴到.env文件的COOKIES配置项中

### 2. 提示"配置加载失败"怎么办？

- 检查.env文件是否存在
- 检查Cookie是否正确填写
- 检查Cookie是否过期（需要重新获取）
- 查看日志页面的详细错误信息

### 3. 爬取失败怎么办？

- 检查网络连接
- 检查Cookie是否有效
- 降低请求速率（增大RATE_LIMIT的值）
- 查看日志页面的详细错误信息

### 4. 如何提高爬取速度？

- 适当提高速率限制（但不要太高，避免被封）
- 增加并发下载数
- 如果不需要媒体文件，可以取消"下载图片/视频"选项

### 5. 程序卡住不动怎么办？

- 查看日志页面，确认程序是否在正常运行
- 某些操作（如下载大量媒体文件）可能需要较长时间
- 如果确实卡住，可以关闭程序重新启动（启用断点续传可以继续之前的进度）

## 🎨 界面预览

GUI包含5个主要标签页：

1. **⚙️ 配置** - 管理配置文件和Cookie
2. **📝 笔记爬取** - 爬取单个或多个笔记
3. **👤 用户爬取** - 爬取用户的所有笔记
4. **🔍 搜索爬取** - 根据关键词搜索并爬取
5. **📋 日志** - 查看实时运行日志

## 📝 注意事项

1. **Cookie安全**：不要将包含Cookie的.env文件分享给他人
2. **请求频率**：不要设置过高的请求速率，避免被平台限制
3. **合法使用**：仅用于学习和研究，不要用于商业用途
4. **尊重版权**：爬取的内容仅供个人使用，不要侵犯他人版权

## 🆘 获取帮助

如果遇到问题：

1. 查看日志页面的详细错误信息
2. 查看项目根目录的 `logs` 文件夹中的日志文件
3. 查看 [README.md](../../README.md) 主文档
4. 查看 [MIGRATION.md](../../MIGRATION.md) 迁移指南
5. 提交Issue到GitHub仓库

## 🔄 从旧版本迁移

如果你之前使用的是 `gui` 目录下的旧版GUI：

1. 新版GUI使用了完全重构的后端，功能更强大
2. 配置方式改为使用.env文件，更加安全和灵活
3. 支持更多的导出格式和高级功能
4. 具有更好的错误处理和日志记录

详见 [MIGRATION.md](../../MIGRATION.md) 了解详细的迁移步骤。

## 📄 许可证

本项目仅供学习交流使用，请勿用于商业用途。
